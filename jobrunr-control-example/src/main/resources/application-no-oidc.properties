# =============================================================================
# TEMPORARY TEST CONFIGURATION - NO OIDC AUTHENTICATION
# =============================================================================
# This configuration disables OIDC for local testing without Keycloak.
#
# ??  WARNING: This grants ALL ROLES to ALL REQUESTS without authentication!
#     Use ONLY for development and testing. NEVER in production!
#
# Usage:
#   ./mvnw -f jobrunr-control-example/pom.xml quarkus:dev -Dquarkus.profile=no-oidc
#
# What happens when OIDC is disabled:
# - JobRunrControlRoleAugmentor automatically grants all roles (viewer, configurator, admin, api-reader, api-executor)
# - No login required
# - UI hides logout button and user info
# - All requests are treated as "anonymous-user" in audit logs
# =============================================================================
# =============================================================================
# HTTP Configuration
# =============================================================================
quarkus.http.limits.max-form-attribute-size=10M
quarkus.http.port=9090
# =============================================================================
# Security Configuration - OIDC DISABLED
# =============================================================================
# Disable OIDC authentication completely
quarkus.oidc.enabled=false
# Remove authentication requirement from endpoints
# (JobRunrControlRoleAugmentor will grant all roles automatically)
quarkus.http.auth.permission.jobrunr-control.paths=/q/jobrunr-control,/q/jobrunr-control/*
quarkus.http.auth.permission.jobrunr-control.policy=permit
quarkus.http.auth.permission.jobrunr-dashboard.paths=/q/jobrunr,/q/jobrunr/*
quarkus.http.auth.permission.jobrunr-dashboard.policy=permit
quarkus.http.auth.permission.jobrunr-api.paths=/q/jobrunr/api/*
quarkus.http.auth.permission.jobrunr-api.policy=permit
# =============================================================================
# JobRunr Configuration
# =============================================================================
quarkus.jobrunr.background-job-server.enabled=true
quarkus.jobrunr.background-job-server.worker-count=20
quarkus.jobrunr.job-scheduler.enabled=true
quarkus.jobrunr.jobs.metrics.enabled=true
quarkus.jobrunr.jobs.metrics.micrometer-timers.enabled=true
# =============================================================================
# JobRunr Dashboard
# =============================================================================
quarkus.jobrunr.dashboard.enabled=true
quarkus.jobrunr.dashboard.type=embedded
quarkus.jobrunr.dashboard.context-path=/q/jobrunr
# =============================================================================
# Database Configuration - H2 in-memory
# =============================================================================
quarkus.datasource.db-kind=h2
quarkus.datasource.username=sa
quarkus.datasource.password=
quarkus.datasource.jdbc.url=jdbc:h2:mem:devdb;DB_CLOSE_DELAY=-1;INIT=RUNSCRIPT FROM 'classpath:db/h2.sql'
quarkus.datasource.jdbc.max-size=16
# =============================================================================
# Logging Configuration
# =============================================================================
quarkus.log.category."ch.css.jobrunr".level=INFO
quarkus.log.category."org.jobrunr".level=INFO
# Show the security warning prominently
quarkus.log.category."ch.css.jobrunr.control.security".level=WARN
# =============================================================================
# OpenAPI / Swagger UI
# =============================================================================
mp.openapi.extensions.smallrye.info.title=JobRunr Control API (NO AUTH - DEV ONLY)
mp.openapi.extensions.smallrye.info.version=1.0.0
mp.openapi.extensions.smallrye.info.description=REST API for JobRunr Pro Scheduler Extension - Authentication Disabled for Testing

